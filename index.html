<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hanzyy Produk</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0e0e0e url('https://i.ibb.co/r0pY3Lt/bg-particles.gif') center/cover no-repeat;
      color: #fff;
      padding: 20px;
    }
    h1, h2 { text-align: center; color: #00ffc8; }
    .box {
      max-width: 800px;
      margin: 20px auto;
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px #00ffc833;
    }
    .produk-item, .keranjang-item {
      background: rgba(255,255,255,0.05);
      padding: 10px;
      margin: 8px 0;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .btn {
      padding: 6px 12px;
      background: #00ffc8;
      color: #000;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin-left: 5px;
    }
    .btn:hover { opacity: 0.85; }
    input[type="date"], input[type="text"] {
      padding: 10px;
      margin: 5px;
      border-radius: 8px;
      border: none;
      width: 45%;
    }
    #namaUser, #namaTampil {
      text-align: center;
      color: #00ffc8;
    }
    canvas { background: #1a1a1a; border-radius: 15px; padding: 10px; }
  </style>
</head>
<body>

<div class="box" id="loginBox">
  <h2>Masukkan Nama Anda</h2>
  <input type="text" id="namaUser" placeholder="Nama Anda" />
  <button class="btn" onclick="login()">Masuk</button>
</div>

<div class="box" id="produkBox" style="display:none;">
  <h2>Selamat datang, <span id="namaTampil"></span> ðŸ‘‹</h2>
  <h3>Daftar Produk</h3>
  <div id="produkList"></div>
  <hr/>
  <h3>Keranjang</h3>
  <div id="keranjangList"></div>
  <div id="diskonInfo"></div>
  <button class="btn" onclick="checkout()">Checkout via WhatsApp</button>
</div>

<div class="box" id="statistikBox" style="display:none;">
  <h2>ðŸ“Š Statistik Penjualan</h2>
  <input type="date" id="fromDate" />
  <input type="date" id="toDate" />
  <button class="btn" onclick="filterStatistik()">Tampilkan</button>
  <canvas id="chartPenjualan" height="120"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const produk = [
  { nama: "Script WA Bot", harga: 50000 },
  { nama: "Panel Pembayaran", harga: 75000 },
  { nama: "Obfuscator JS", harga: 60000 },
  { nama: "Panel Produk", harga: 45000 }
];
let keranjang = [];
let namaUser = '';

function login() {
  const nama = document.getElementById("namaUser").value.trim();
  if (!nama) return alert("Nama wajib diisi");
  namaUser = nama;
  document.getElementById("namaTampil").innerText = nama;
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("produkBox").style.display = "block";
  document.getElementById("statistikBox").style.display = "block";
  renderProduk();
}

function renderProduk() {
  const list = document.getElementById("produkList");
  list.innerHTML = "";
  produk.forEach((p, i) => {
    const el = document.createElement("div");
    el.className = "produk-item";
    el.innerHTML = `
      <span>${p.nama} - Rp${p.harga.toLocaleString()}</span>
      <div>
        <button class="btn" onclick="tambahKeranjang(${i})">+ Keranjang</button>
        <button class="btn" style="background: #00c851;" onclick="beliLangsung(${i})">Beli</button>
      </div>
    `;
    list.appendChild(el);
  });
  renderKeranjang();
}

function tambahKeranjang(i) {
  keranjang.push(produk[i]);
  renderKeranjang();
  playClick();
}

function renderKeranjang() {
  const wrap = document.getElementById("keranjangList");
  wrap.innerHTML = "";
  let total = 0;
  keranjang.forEach((item, index) => {
    total += item.harga;
    const el = document.createElement("div");
    el.className = "keranjang-item";
    el.innerHTML = `
      ${item.nama} - Rp${item.harga.toLocaleString()}
      <button onclick="hapusItem(${index})" style="color:red;">X</button>
    `;
    wrap.appendChild(el);
  });

  let diskon = total >= 100000 ? total * 0.1 : 0;
  document.getElementById("diskonInfo").innerHTML = `
    <p>Total: <b>Rp${total.toLocaleString()}</b></p>
    <p>Diskon: <b>Rp${diskon.toLocaleString()}</b></p>
    <p><b>Total Bayar: Rp${(total - diskon).toLocaleString()}</b></p>
  `;
}

function hapusItem(i) {
  keranjang.splice(i, 1);
  renderKeranjang();
}

function checkout() {
  if (keranjang.length === 0) return alert("Keranjang kosong!");
  playClick(); audioSuccess.play();
  let pesan = `Halo saya ${namaUser}, saya ingin membeli:\n\n`;
  let total = 0;
  keranjang.forEach((p, i) => {
    pesan += `- ${p.nama} = Rp${p.harga.toLocaleString()}\n`;
    total += p.harga;
  });
  let diskon = total >= 100000 ? total * 0.1 : 0;
  let bayar = total - diskon;
  pesan += `\nTotal: Rp${total.toLocaleString()}`;
  if (diskon > 0) pesan += `\nDiskon: Rp${diskon.toLocaleString()}`;
  pesan += `\nTotal Bayar: Rp${bayar.toLocaleString()}`;
  showPopupSukses("âœ… Checkout berhasil. Mengarah ke WhatsApp...");
  const url = "https://wa.me/6288989566141?text=" + encodeURIComponent(pesan);
  setTimeout(() => { window.open(url, '_blank'); }, 800);
}

function beliLangsung(i) {
  playClick(); audioSuccess.play();
  const produkItem = produk[i];
  const pesan = `Halo saya ${namaUser}, saya ingin membeli:\n\n` +
                `- ${produkItem.nama} = Rp${produkItem.harga.toLocaleString()}\n\n` +
                `Total: Rp${produkItem.harga.toLocaleString()}`;
  showPopupSukses("âœ… Berhasil mengarahkan ke WhatsApp...");
  const url = "https://wa.me/6288989566141?text=" + encodeURIComponent(pesan);
  setTimeout(() => { window.open(url, '_blank'); }, 800);
}

function playClick() {
  audioClick.currentTime = 0;
  audioClick.play();
  if (navigator.vibrate) navigator.vibrate(100);
}

function showPopupSukses(pesan) {
  const div = document.createElement("div");
  div.innerText = pesan;
  div.style.position = "fixed";
  div.style.top = "20px";
  div.style.right = "20px";
  div.style.padding = "15px 20px";
  div.style.background = "#00c851";
  div.style.color = "#fff";
  div.style.fontWeight = "bold";
  div.style.borderRadius = "10px";
  div.style.boxShadow = "0 0 10px rgba(0,0,0,0.3)";
  div.style.zIndex = "9999";
  document.body.appendChild(div);
  setTimeout(() => div.remove(), 3000);
}

// Grafik statistik
const dataPenjualan = [...Array(30)].map((_, i) => {
  const d = new Date(2025, 6, i+1);
  const tgl = d.toISOString().split("T")[0];
  return { tanggal: tgl, total: Math.floor(Math.random() * 150000) + 10000 };
});

function filterStatistik() {
  const from = document.getElementById("fromDate").value;
  const to = document.getElementById("toDate").value;
  if (!from || !to) return alert("Pilih rentang tanggal!");
  const filtered = dataPenjualan.filter(d => d.tanggal >= from && d.tanggal <= to);
  const labels = filtered.map(d => d.tanggal);
  const values = filtered.map(d => d.total);
  const ctx = document.getElementById("chartPenjualan").getContext("2d");
  if (window.penjualanChart) window.penjualanChart.destroy();
  window.penjualanChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{ label: 'Total Penjualan', backgroundColor: '#00ffccaa', data: values }]
    },
    options: { responsive: true, scales: { y: { beginAtZero: true } } }
  });
}

const audioClick = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3");
const audioSuccess = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3");
</script>
</body>
</html>
